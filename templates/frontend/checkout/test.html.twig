{# templates/payment/redirect_to_stripe.html.twig #}
<!DOCTYPE html>
<html>
	<head>
		<title>Redirecting to Payment...</title>
		 <script>
		        // Immediately redirect using JavaScript
		        (function() {
		            // Validate URL first
		            const stripeUrl = "{{ stripe_url|e('js') }}";
		            
		            if (stripeUrl.startsWith('https://checkout.stripe.com/')) {
		                window.location.replace(stripeUrl); // Replace doesn't keep page in history
		            } else {
		                document.body.innerHTML = `
		                    <div style="padding: 2rem; text-align: center;">
		                        <h2>Payment Error</h2>
		                        <p>Invalid payment gateway URL</p>
		                        <a href="{{ path('app_frontend_home') }}">
		                            Return to Homepage
		                        </a>
		                    </div>
		                `;
		                console.error('Invalid Stripe URL:', stripeUrl);
		            }
		        })();
		    </script>
		<noscript>
			{# Fallback for non-JS browsers #}
			<meta http-equiv="refresh" content="0;url={{ stripe_url|e('html_attr') }}">
			<style>
				.js-required {
					display: none;
				}
			</style>
		</noscript>
	</head>
	<body>
		<div class="js-required" style="text-align: center; padding: 2rem;">
			<p>Redirecting to secure payment page...</p>
			<p>If you're not redirected automatically,
				<a href="{{ stripe_url|e('html_attr') }}">click here</a>.
			</p>
		</div>
	</body>
</html>
