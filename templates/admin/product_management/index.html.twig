{% extends 'layout/admin.html.twig' %}
{% block title %}Product Index
{% endblock %}

{% block main_content %}
	<div class="flex items-center justify-between mb-6">
		<h1 class="text-2xl font-semibold text-gray-800">Product Index</h1>
		<a href="{{ path('app_admin_product_management_new') }}" class="inline-block rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 transition">
			+ Create New
		</a>
	</div>

	{% set headers = ['ID', 'Image', 'Name', 'Description', 'Price', 'Quantity', 'Actions'] %}

	{% set rows = [] %}
	{% for product in products %}
		{% set imageHtml = '<img class="size-13 aspect-square" src="' ~ asset('uploads/' ~ product.image) ~ '" alt="' ~ product.name ~ ' image"/>' %}

		{% set actions %}
		<a href="{{ path('app_admin_product_management_show', { id: product.id }) }}" class="text-indigo-600 hover:underline">Show</a>
		<a href="{{ path('app_admin_product_management_edit', { id: product.id }) }}" class="text-green-600 hover:underline ml-2">Edit</a>
		{% endset %}

		{% set row = [
      { value: product.id },
      { value: imageHtml, is_html: true },
      { value: product.name },
      { value: product.description },
      { value: product.price },
      { value: product.quantity },
      { value: actions|raw, is_html: true }
    ] %}

		{% set rows = rows|merge([row]) %}
	{% else %}
		{% set rows = [
      [
        { value: 'No records found.', is_html: false },
        { value: '', is_html: false },
        { value: '', is_html: false },
        { value: '', is_html: false },
        { value: '', is_html: false },
        { value: '', is_html: false },
        { value: '', is_html: false }
      ]
    ] %}
	{% endfor %}

	{% include 'frontend/components/_table.html.twig' with {
    headers: headers,
    rows: rows
  } %}
{% endblock %}
